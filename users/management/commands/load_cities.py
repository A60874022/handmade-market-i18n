# users/management/commands/load_cities.py
from django.core.management.base import BaseCommand
from users.models import City


class Command(BaseCommand):
    help = "Загрузка расширенного списка городов России"

    def handle(self, *args, **options):
        cities_data = [
            # Города-миллионники
            ("Москва", "Московская область"),
            ("Санкт-Петербург", "Ленинградская область"),
            ("Новосибирск", "Новосибирская область"),
            ("Екатеринбург", "Свердловская область"),
            ("Казань", "Республика Татарстан"),
            ("Нижний Новгород", "Нижегородская область"),
            ("Челябинск", "Челябинская область"),
            ("Самара", "Самарская область"),
            ("Омск", "Омская область"),
            ("Ростов-на-Дону", "Ростовская область"),
            ("Уфа", "Республика Башкортостан"),
            ("Красноярск", "Красноярский край"),
            ("Пермь", "Пермский край"),
            ("Воронеж", "Воронежская область"),
            ("Волгоград", "Волгоградская область"),
            # Крупные города (более 500 тыс.)
            ("Краснодар", "Краснодарский край"),
            ("Саратов", "Саратовская область"),
            ("Тюмень", "Тюменская область"),
            ("Тольятти", "Самарская область"),
            ("Ижевск", "Удмуртская Республика"),
            ("Барнаул", "Алтайский край"),
            ("Ульяновск", "Ульяновская область"),
            ("Иркутск", "Иркутская область"),
            ("Хабаровск", "Хабаровский край"),
            ("Ярославль", "Ярославская область"),
            ("Владивосток", "Приморский край"),
            ("Махачкала", "Республика Дагестан"),
            ("Томск", "Томская область"),
            ("Оренбург", "Оренбургская область"),
            ("Кемерово", "Кемеровская область"),
            # Города 250-500 тыс.
            ("Новокузнецк", "Кемеровская область"),
            ("Рязань", "Рязанская область"),
            ("Астрахань", "Астраханская область"),
            ("Набережные Челны", "Республика Татарстан"),
            ("Пенза", "Пензенская область"),
            ("Липецк", "Липецкая область"),
            ("Киров", "Кировская область"),
            ("Чебоксары", "Чувашская Республика"),
            ("Тула", "Тульская область"),
            ("Калининград", "Калининградская область"),
            ("Балашиха", "Московская область"),
            ("Курск", "Курская область"),
            ("Севастополь", "Севастополь"),
            ("Сочи", "Краснодарский край"),
            ("Ставрополь", "Ставропольский край"),
            # Города 100-250 тыс.
            ("Улан-Удэ", "Республика Бурятия"),
            ("Тверь", "Тверская область"),
            ("Магнитогорск", "Челябинская область"),
            ("Иваново", "Ивановская область"),
            ("Брянск", "Брянская область"),
            ("Белгород", "Белгородская область"),
            ("Сургут", "Ханты-Мансийский автономный округ"),
            ("Владимир", "Владимирская область"),
            ("Нижний Тагил", "Свердловская область"),
            ("Архангельск", "Архангельская область"),
            ("Чита", "Забайкальский край"),
            ("Симферополь", "Республика Крым"),
            ("Калуга", "Калужская область"),
            ("Смоленск", "Смоленская область"),
            ("Волжский", "Волгоградская область"),
            ("Саранск", "Республика Мордовия"),
            ("Череповец", "Вологодская область"),
            ("Вологда", "Вологодская область"),
            ("Владикавказ", "Республика Северная Осетия-Алания"),
            ("Якутск", "Республика Саха (Якутия)"),
            # Популярные туристические и значимые города
            ("Суздаль", "Владимирская область"),
            ("Кострома", "Костромская область"),
            ("Переславль-Залесский", "Ярославская область"),
            ("Ростов Великий", "Ярославская область"),
            ("Сергиев Посад", "Московская область"),
            ("Псков", "Псковская область"),
            ("Великий Новгород", "Новгородская область"),
            ("Петрозаводск", "Республика Карелия"),
            ("Мурманск", "Мурманская область"),
            ("Армавир", "Краснодарский край"),
            ("Новороссийск", "Краснодарский край"),
            ("Геленджик", "Краснодарский край"),
            ("Анапа", "Краснодарский край"),
            ("Евпатория", "Республика Крым"),
            ("Ялта", "Республика Крым"),
            ("Алушта", "Республика Крым"),
            ("Кисловодск", "Ставропольский край"),
            ("Пятигорск", "Ставропольский край"),
            ("Ессентуки", "Ставропольский край"),
            ("Железноводск", "Ставропольский край"),
            # Дополнительные региональные центры
            ("Орёл", "Орловская область"),
            ("Курган", "Курганская область"),
            ("Черкесск", "Карачаево-Черкесская Республика"),
            ("Нальчик", "Кабардино-Балкарская Республика"),
            ("Элиста", "Республика Калмыкия"),
            ("Абакан", "Республика Хакасия"),
            ("Кызыл", "Республика Тыва"),
            ("Горно-Алтайск", "Республика Алтай"),
            ("Майкоп", "Республика Адыгея"),
            ("Йошкар-Ола", "Республика Марий Эл"),
            ("Сыктывкар", "Республика Коми"),
            ("Ханты-Мансийск", "Ханты-Мансийский автономный округ"),
            ("Салехард", "Ямало-Ненецкий автономный округ"),
            ("Нарьян-Мар", "Ненецкий автономный округ"),
            ("Благовещенск", "Амурская область"),
            ("Петропавловск-Камчатский", "Камчатский край"),
            ("Южно-Сахалинск", "Сахалинская область"),
            ("Магадан", "Магаданская область"),
            ("Анадырь", "Чукотский автономный округ"),
        ]

        cities_created = 0
        cities_updated = 0

        for city_name, region in cities_data:
            city, created = City.objects.update_or_create(
                name=city_name,
                defaults={"region": region, "country": "Россия", "is_active": True},
            )

            if created:
                cities_created += 1
                self.stdout.write(f"Создан город: {city_name}")
            else:
                cities_updated += 1

        self.stdout.write(
            self.style.SUCCESS(
                f"Успешно загружено городов: создано {cities_created}, обновлено {cities_updated}"
            )
        )
