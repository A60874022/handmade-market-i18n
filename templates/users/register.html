{% extends 'users/base_auth.html' %}
{% load static i18n %}

{% block title %}{% trans "Registration" %}{% endblock %}

{% block content %}
<div class="text-center mb-4">
    <h2 class="fw-bold">{% trans "Create Account" %}</h2>
    <p class="text-muted">{% trans "Join our community of craftsmen" %}</p>
</div>

<!-- Display system messages -->
{% if messages %}
{% for message in messages %}
<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{% endfor %}
{% endif %}

<form method="post" novalidate>
    {% csrf_token %}

    <!-- Email field -->
    <div class="mb-3">
        <label for="{{ form.email.id_for_label }}" class="form-label">{% trans "Email" %}</label>
        <input type="email" name="{{ form.email.name }}" id="{{ form.email.id_for_label }}"
            class="form-control {% if form.email.errors %}is-invalid{% endif %}" placeholder="your.email@example.com"
            value="{{ form.email.value|default:'' }}" required>
        {% if form.email.errors %}
        <div class="invalid-feedback">
            {{ form.email.errors.0 }}
        </div>
        {% endif %}
    </div>

    <!-- Password field -->
    <div class="mb-3">
        <label for="{{ form.password1.id_for_label }}" class="form-label">{% trans "Password" %}</label>
        <input type="password" name="{{ form.password1.name }}" id="{{ form.password1.id_for_label }}"
            class="form-control {% if form.password1.errors %}is-invalid{% endif %}"
            placeholder="{% trans 'Create a strong password' %}" required>
        {% if form.password1.errors %}
        <div class="invalid-feedback">
            {{ form.password1.errors.0 }}
        </div>
        {% endif %}
        {% if form.password1.help_text %}
        <div class="form-text">{{ form.password1.help_text }}</div>
        {% endif %}
    </div>

    <!-- Password confirmation -->
    <div class="mb-4">
        <label for="{{ form.password2.id_for_label }}" class="form-label">{% trans "Confirm Password" %}</label>
        <input type="password" name="{{ form.password2.name }}" id="{{ form.password2.id_for_label }}"
            class="form-control {% if form.password2.errors %}is-invalid{% endif %}"
            placeholder="{% trans 'Repeat your password' %}" required>
        {% if form.password2.errors %}
        <div class="invalid-feedback">
            {{ form.password2.errors.0 }}
        </div>
        {% endif %}
        {% if form.password2.help_text %}
        <div class="form-text">{{ form.password2.help_text }}</div>
        {% endif %}
    </div>

    <!-- Information about account capabilities -->
    <div class="alert alert-info mb-4">
        <div class="d-flex">
            <div class="me-3">ðŸŽ¨</div>
            <div>
                <strong>{% trans "Your craftsman account" %}</strong><br>
                {% trans "After registration, you will be able to buy products from other craftsmen and sell your own"
                %}
            </div>
        </div>
    </div>

    <!-- Registration button -->
    <button type="submit" class="btn btn-primary w-100 py-2 mb-3 fw-bold">
        {% trans "Register" %}
    </button>

    <!-- Login link -->
    <div class="text-center">
        <span class="text-muted">{% trans "Already have an account?" %}</span>
        <a href="{% url 'users:login' %}" class="text-decoration-none fw-bold">{% trans "Log in" %}</a>
    </div>
</form>
{% endblock %}